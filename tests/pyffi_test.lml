let pymod = import_py "tests/pyffi_module.py";
let x = 1;
let y = (pymod.test_pyffi) x;
let ext_py_fn = (pymod.test_pyffi_ext) ();
let a = (pymod.test_pyffi) x;
let _ = println "y = " y ", a = " a;
let lst = [1];
let lst = (pymod.append_to_list) lst 2;
let lst = (pymod.append_to_list) lst 3;

let cb = |x| {
    while (x > 0) {
        println "counter is " x;
        let x = x - 1;
    };
    return "hello";
};

let cbr = (pymod.call_lcaml_callback) cb;
if (cbr != "hello") {
    panic("wrong!");
};

return lst;
